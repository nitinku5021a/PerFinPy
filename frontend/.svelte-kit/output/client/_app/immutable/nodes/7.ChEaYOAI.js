import{s as Ye,a as Je,o as Ke,r as Qe}from"../chunks/scheduler.DXwQMlsl.js";import{S as We,i as Xe,d as r,m as Ze,n as xe,o as et,p as Ue,s as J,a as k,b as t,q as tt,r as ge,k as v,u as U,c as u,l as $,g as P,e as I,f as T,v as lt,h as p,j as N,t as A,w as at,x as nt}from"../chunks/index.BwbdioCG.js";import{f as D,a as Fe}from"../chunks/format.j6oJxotq.js";import{t as we}from"../chunks/period.ClbncGIq.js";import{T as st}from"../chunks/Table.BaPFpwIW.js";function Ge(l){let n,_;return{c(){n=p("p"),_=A(l[5]),this.h()},l(s){n=u(s,"P",{class:!0});var o=I(n);_=T(o,l[5]),o.forEach(r),this.h()},h(){v(n,"class","danger")},m(s,o){k(s,n,o),t(n,_)},p(s,o){o&32&&J(_,s[5])},d(s){s&&r(n)}}}function Re(l){let n,_,s,o,d,y,m,c,S;return{c(){n=p("label"),_=A(`Start: \r
      `),s=p("input"),o=N(),d=p("label"),y=A(`End: \r
      `),m=p("input"),this.h()},l(f){n=u(f,"LABEL",{});var i=I(n);_=T(i,`Start: \r
      `),s=u(i,"INPUT",{type:!0}),i.forEach(r),o=P(f),d=u(f,"LABEL",{});var E=I(d);y=T(E,`End: \r
      `),m=u(E,"INPUT",{type:!0}),E.forEach(r),this.h()},h(){v(s,"type","date"),v(m,"type","date")},m(f,i){k(f,n,i),t(n,_),t(n,s),U(s,l[1]),k(f,o,i),k(f,d,i),t(d,y),t(d,m),U(m,l[2]),c||(S=[ge(s,"input",l[9]),ge(m,"input",l[10])],c=!0)},p(f,i){i&2&&U(s,f[1]),i&4&&U(m,f[2])},d(f){f&&(r(n),r(o),r(d)),c=!1,Qe(S)}}}function ot(l){let n,_="Ledger",s,o,d="Trial balance and income statement summary.",y,m,c,S,f,i,E,se="Current Month",L,h="Year to Date",O,Ve="All",B,Be="Custom Range",Ce,oe,F,Ee,Z=(l[4]?D(l[4].net_income):"--")+"",re,ie,w,q,G,$e="Trial Totals",Pe,j,x=(l[3]?D(l[3].total_debits):"--")+"",ue,Ne,ee=(l[3]?D(l[3].total_credits):"--")+"",pe,Ie,z,R,qe="Net Income",Te,K,te=(l[4]?D(l[4].net_income):"--")+"",_e,Ae,H,Y,je="Income vs Expense",Se,g,le=(l[4]?D(l[4].total_income):"--")+"",ce,De,ze=" ",ke,ye,ae=(l[4]?D(l[4].total_expenses):"--")+"",fe,de,M,V,Le,He,b=l[5]&&Ge(l),C=l[0]==="custom"&&Re(l);return M=new st({props:{columns:l[6],rows:l[3]?l[3].account_balances:[],allowHtml:!0}}),{c(){n=p("h1"),n.textContent=_,s=N(),o=p("p"),o.textContent=d,y=N(),b&&b.c(),m=N(),c=p("div"),S=p("label"),f=A(`Period: \r
    `),i=p("select"),E=p("option"),E.textContent=se,L=p("option"),L.textContent=h,O=p("option"),O.textContent=Ve,B=p("option"),B.textContent=Be,Ce=N(),C&&C.c(),oe=N(),F=p("span"),Ee=A("Net Income: "),re=A(Z),ie=N(),w=p("div"),q=p("div"),G=p("span"),G.textContent=$e,Pe=N(),j=p("span"),ue=A(x),Ne=A(" / "),pe=A(ee),Ie=N(),z=p("div"),R=p("span"),R.textContent=qe,Te=N(),K=p("span"),_e=A(te),Ae=N(),H=p("div"),Y=p("span"),Y.textContent=je,Se=N(),g=p("span"),ce=A(le),De=A(" /"),ke=A(ze),ye=N(),fe=A(ae),de=N(),at(M.$$.fragment),this.h()},l(e){n=u(e,"H1",{class:!0,"data-svelte-h":!0}),$(n)!=="svelte-1u0p4b6"&&(n.textContent=_),s=P(e),o=u(e,"P",{class:!0,"data-svelte-h":!0}),$(o)!=="svelte-3okzza"&&(o.textContent=d),y=P(e),b&&b.l(e),m=P(e),c=u(e,"DIV",{class:!0});var a=I(c);S=u(a,"LABEL",{});var Q=I(S);f=T(Q,`Period: \r
    `),i=u(Q,"SELECT",{});var ne=I(i);E=u(ne,"OPTION",{"data-svelte-h":!0}),$(E)!=="svelte-ifagp3"&&(E.textContent=se),L=u(ne,"OPTION",{"data-svelte-h":!0}),$(L)!=="svelte-ne2kh5"&&(L.textContent=h),O=u(ne,"OPTION",{"data-svelte-h":!0}),$(O)!=="svelte-421o1o"&&(O.textContent=Ve),B=u(ne,"OPTION",{"data-svelte-h":!0}),$(B)!=="svelte-tc3t8p"&&(B.textContent=Be),ne.forEach(r),Q.forEach(r),Ce=P(a),C&&C.l(a),oe=P(a),F=u(a,"SPAN",{class:!0});var Oe=I(F);Ee=T(Oe,"Net Income: "),re=T(Oe,Z),Oe.forEach(r),a.forEach(r),ie=P(e),w=u(e,"DIV",{class:!0});var W=I(w);q=u(W,"DIV",{class:!0});var me=I(q);G=u(me,"SPAN",{class:!0,"data-svelte-h":!0}),$(G)!=="svelte-19347y3"&&(G.textContent=$e),Pe=P(me),j=u(me,"SPAN",{class:!0});var ve=I(j);ue=T(ve,x),Ne=T(ve," / "),pe=T(ve,ee),ve.forEach(r),me.forEach(r),Ie=P(W),z=u(W,"DIV",{class:!0});var he=I(z);R=u(he,"SPAN",{class:!0,"data-svelte-h":!0}),$(R)!=="svelte-utxhlq"&&(R.textContent=qe),Te=P(he),K=u(he,"SPAN",{class:!0});var Me=I(K);_e=T(Me,te),Me.forEach(r),he.forEach(r),Ae=P(W),H=u(W,"DIV",{class:!0});var be=I(H);Y=u(be,"SPAN",{class:!0,"data-svelte-h":!0}),$(Y)!=="svelte-u1fyl2"&&(Y.textContent=je),Se=P(be),g=u(be,"SPAN",{class:!0});var X=I(g);ce=T(X,le),De=T(X," /"),ke=T(X,ze),ye=P(X),fe=T(X,ae),X.forEach(r),be.forEach(r),W.forEach(r),de=P(e),lt(M.$$.fragment,e),this.h()},h(){v(n,"class","page-title"),v(o,"class","page-subtitle"),E.__value="current_month",U(E,E.__value),L.__value="ytd",U(L,L.__value),O.__value="all",U(O,O.__value),B.__value="custom",U(B,B.__value),l[0]===void 0&&Je(()=>l[8].call(i)),v(F,"class","meta"),v(c,"class","toolbar"),v(G,"class","panel-label"),v(j,"class","panel-value"),v(q,"class","panel-row"),v(R,"class","panel-label"),v(K,"class","panel-value"),v(z,"class","panel-row"),v(Y,"class","panel-label"),v(g,"class","panel-value"),v(H,"class","panel-row"),v(w,"class","panel")},m(e,a){k(e,n,a),k(e,s,a),k(e,o,a),k(e,y,a),b&&b.m(e,a),k(e,m,a),k(e,c,a),t(c,S),t(S,f),t(S,i),t(i,E),t(i,L),t(i,O),t(i,B),Ue(i,l[0],!0),t(c,Ce),C&&C.m(c,null),t(c,oe),t(c,F),t(F,Ee),t(F,re),k(e,ie,a),k(e,w,a),t(w,q),t(q,G),t(q,Pe),t(q,j),t(j,ue),t(j,Ne),t(j,pe),t(w,Ie),t(w,z),t(z,R),t(z,Te),t(z,K),t(K,_e),t(w,Ae),t(w,H),t(H,Y),t(H,Se),t(H,g),t(g,ce),t(g,De),t(g,ke),t(g,ye),t(g,fe),k(e,de,a),tt(M,e,a),V=!0,Le||(He=ge(i,"change",l[8]),Le=!0)},p(e,[a]){e[5]?b?b.p(e,a):(b=Ge(e),b.c(),b.m(m.parentNode,m)):b&&(b.d(1),b=null),a&1&&Ue(i,e[0]),e[0]==="custom"?C?C.p(e,a):(C=Re(e),C.c(),C.m(c,oe)):C&&(C.d(1),C=null),(!V||a&16)&&Z!==(Z=(e[4]?D(e[4].net_income):"--")+"")&&J(re,Z),(!V||a&8)&&x!==(x=(e[3]?D(e[3].total_debits):"--")+"")&&J(ue,x),(!V||a&8)&&ee!==(ee=(e[3]?D(e[3].total_credits):"--")+"")&&J(pe,ee),(!V||a&16)&&te!==(te=(e[4]?D(e[4].net_income):"--")+"")&&J(_e,te),(!V||a&16)&&le!==(le=(e[4]?D(e[4].total_income):"--")+"")&&J(ce,le),(!V||a&16)&&ae!==(ae=(e[4]?D(e[4].total_expenses):"--")+"")&&J(fe,ae);const Q={};a&8&&(Q.rows=e[3]?e[3].account_balances:[]),M.$set(Q)},i(e){V||(et(M.$$.fragment,e),V=!0)},o(e){xe(M.$$.fragment,e),V=!1},d(e){e&&(r(n),r(s),r(o),r(y),r(m),r(c),r(ie),r(w),r(de)),b&&b.d(e),C&&C.d(),Ze(M,e),Le=!1,He()}}}function rt(l,n,_){let s="current_month",o="",d="",y=null,m=null,c="",S=!1;const f=[{header:"Account",render:h=>`<a href="/journal-entries?account_id=${h.account.id}&period=${we(s,o,d)}">${h.account.path||h.account.name}</a>`},{header:"Type",render:h=>h.account.account_type},{header:"Debit/Credit",render:h=>h.type},{header:"Balance",render:h=>D(h.balance),align:"right"}];async function i(){try{_(5,c="");const[h,O]=await Promise.all([Fe(`/reports/trial-balance?period=${we(s,o,d)}`),Fe(`/reports/income-statement?period=${we(s,o,d)}`)]);_(3,y=h),_(4,m=O)}catch(h){_(5,c=h.message||"Failed to load.")}}Ke(()=>{_(7,S=!0)});function E(){s=nt(this),_(0,s)}function se(){o=this.value,_(1,o)}function L(){d=this.value,_(2,d)}return l.$$.update=()=>{l.$$.dirty&135&&S&&i()},[s,o,d,y,m,c,f,S,E,se,L]}class ft extends We{constructor(n){super(),Xe(this,n,rt,ot,Ye,{})}}export{ft as component};
