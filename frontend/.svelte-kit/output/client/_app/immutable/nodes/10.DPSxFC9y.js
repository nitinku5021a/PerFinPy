import{s as De,a as Le,o as ke,r as we}from"../chunks/scheduler.DXwQMlsl.js";import{S as ye,i as ge,d as u,m as Ae,n as Oe,o as Se,p as Pe,s as ae,a as E,b as l,q as Be,r as ce,k as P,u as H,c as _,l as $,g as D,e as k,f as w,v as $e,h as c,j as L,t as y,w as He,x as Me}from"../chunks/index.BwbdioCG.js";import{f as U,a as Ve}from"../chunks/format.j6oJxotq.js";import{T as je}from"../chunks/Table.BaPFpwIW.js";import{t as Te}from"../chunks/period.ClbncGIq.js";function Ie(t){let a,f;return{c(){a=c("p"),f=y(t[4]),this.h()},l(n){a=_(n,"P",{class:!0});var s=k(a);f=w(s,t[4]),s.forEach(u),this.h()},h(){P(a,"class","danger")},m(n,s){E(n,a,s),l(a,f)},p(n,s){s&16&&ae(f,n[4])},d(n){n&&u(a)}}}function Ne(t){let a,f,n,s,m,T,d,p,I;return{c(){a=c("label"),f=y(`Start: \r
      `),n=c("input"),s=L(),m=c("label"),T=y(`End: \r
      `),d=c("input"),this.h()},l(v){a=_(v,"LABEL",{});var i=k(a);f=w(i,`Start: \r
      `),n=_(i,"INPUT",{type:!0}),i.forEach(u),s=D(v),m=_(v,"LABEL",{});var C=k(m);T=w(C,`End: \r
      `),d=_(C,"INPUT",{type:!0}),C.forEach(u),this.h()},h(){P(n,"type","date"),P(d,"type","date")},m(v,i){E(v,a,i),l(a,f),l(a,n),H(n,t[1]),E(v,s,i),E(v,m,i),l(m,T),l(m,d),H(d,t[2]),p||(I=[ce(n,"input",t[8]),ce(d,"input",t[9])],p=!0)},p(v,i){i&2&&H(n,v[1]),i&4&&H(d,v[2])},d(v){v&&(u(a),u(s),u(m)),p=!1,we(I)}}}function qe(t){let a,f="Trial Balance",n,s,m="Ledger validation view showing debits and credits.",T,d,p,I,v,i,C,K="All",r,fe="Year to Date",g,de="Current Month",A,ve="Custom Range",ne,Q,N,se,R=(t[3]?U(t[3].total_debits):"--")+"",W,oe,me=" ",ie,re,Y=(t[3]?U(t[3].total_credits):"--")+"",X,Z,O,S,M,he="Balance Check",ue,F,z=(t[3]?U(t[3].total_debits-t[3].total_credits):"--")+"",x,pe,V,be='<span class="panel-label">Note</span> <span class="panel-value">Click an account to see journal entries.</span>',ee,B,j,_e,Ce,h=t[4]&&Ie(t),b=t[0]==="custom"&&Ne(t);return B=new je({props:{columns:t[5],rows:t[3]?t[3].account_balances:[],allowHtml:!0}}),{c(){a=c("h1"),a.textContent=f,n=L(),s=c("p"),s.textContent=m,T=L(),h&&h.c(),d=L(),p=c("div"),I=c("label"),v=y(`Period: \r
    `),i=c("select"),C=c("option"),C.textContent=K,r=c("option"),r.textContent=fe,g=c("option"),g.textContent=de,A=c("option"),A.textContent=ve,ne=L(),b&&b.c(),Q=L(),N=c("span"),se=y("Debits: "),W=y(R),oe=y(" | Credits:"),ie=y(me),re=L(),X=y(Y),Z=L(),O=c("div"),S=c("div"),M=c("span"),M.textContent=he,ue=L(),F=c("span"),x=y(z),pe=L(),V=c("div"),V.innerHTML=be,ee=L(),He(B.$$.fragment),this.h()},l(e){a=_(e,"H1",{class:!0,"data-svelte-h":!0}),$(a)!=="svelte-1xfrag7"&&(a.textContent=f),n=D(e),s=_(e,"P",{class:!0,"data-svelte-h":!0}),$(s)!=="svelte-1o6fnm7"&&(s.textContent=m),T=D(e),h&&h.l(e),d=D(e),p=_(e,"DIV",{class:!0});var o=k(p);I=_(o,"LABEL",{});var G=k(I);v=w(G,`Period: \r
    `),i=_(G,"SELECT",{});var J=k(i);C=_(J,"OPTION",{"data-svelte-h":!0}),$(C)!=="svelte-421o1o"&&(C.textContent=K),r=_(J,"OPTION",{"data-svelte-h":!0}),$(r)!=="svelte-ne2kh5"&&(r.textContent=fe),g=_(J,"OPTION",{"data-svelte-h":!0}),$(g)!=="svelte-ifagp3"&&(g.textContent=de),A=_(J,"OPTION",{"data-svelte-h":!0}),$(A)!=="svelte-tc3t8p"&&(A.textContent=ve),J.forEach(u),G.forEach(u),ne=D(o),b&&b.l(o),Q=D(o),N=_(o,"SPAN",{class:!0});var q=k(N);se=w(q,"Debits: "),W=w(q,R),oe=w(q," | Credits:"),ie=w(q,me),re=D(q),X=w(q,Y),q.forEach(u),o.forEach(u),Z=D(e),O=_(e,"DIV",{class:!0});var te=k(O);S=_(te,"DIV",{class:!0});var le=k(S);M=_(le,"SPAN",{class:!0,"data-svelte-h":!0}),$(M)!=="svelte-1wurc9c"&&(M.textContent=he),ue=D(le),F=_(le,"SPAN",{class:!0});var Ee=k(F);x=w(Ee,z),Ee.forEach(u),le.forEach(u),pe=D(te),V=_(te,"DIV",{class:!0,"data-svelte-h":!0}),$(V)!=="svelte-1y88rlm"&&(V.innerHTML=be),te.forEach(u),ee=D(e),$e(B.$$.fragment,e),this.h()},h(){P(a,"class","page-title"),P(s,"class","page-subtitle"),C.__value="all",H(C,C.__value),r.__value="ytd",H(r,r.__value),g.__value="current_month",H(g,g.__value),A.__value="custom",H(A,A.__value),t[0]===void 0&&Le(()=>t[7].call(i)),P(N,"class","meta"),P(p,"class","toolbar"),P(M,"class","panel-label"),P(F,"class","panel-value"),P(S,"class","panel-row"),P(V,"class","panel-row"),P(O,"class","panel")},m(e,o){E(e,a,o),E(e,n,o),E(e,s,o),E(e,T,o),h&&h.m(e,o),E(e,d,o),E(e,p,o),l(p,I),l(I,v),l(I,i),l(i,C),l(i,r),l(i,g),l(i,A),Pe(i,t[0],!0),l(p,ne),b&&b.m(p,null),l(p,Q),l(p,N),l(N,se),l(N,W),l(N,oe),l(N,ie),l(N,re),l(N,X),E(e,Z,o),E(e,O,o),l(O,S),l(S,M),l(S,ue),l(S,F),l(F,x),l(O,pe),l(O,V),E(e,ee,o),Be(B,e,o),j=!0,_e||(Ce=ce(i,"change",t[7]),_e=!0)},p(e,[o]){e[4]?h?h.p(e,o):(h=Ie(e),h.c(),h.m(d.parentNode,d)):h&&(h.d(1),h=null),o&1&&Pe(i,e[0]),e[0]==="custom"?b?b.p(e,o):(b=Ne(e),b.c(),b.m(p,Q)):b&&(b.d(1),b=null),(!j||o&8)&&R!==(R=(e[3]?U(e[3].total_debits):"--")+"")&&ae(W,R),(!j||o&8)&&Y!==(Y=(e[3]?U(e[3].total_credits):"--")+"")&&ae(X,Y),(!j||o&8)&&z!==(z=(e[3]?U(e[3].total_debits-e[3].total_credits):"--")+"")&&ae(x,z);const G={};o&8&&(G.rows=e[3]?e[3].account_balances:[]),B.$set(G)},i(e){j||(Se(B.$$.fragment,e),j=!0)},o(e){Oe(B.$$.fragment,e),j=!1},d(e){e&&(u(a),u(n),u(s),u(T),u(d),u(p),u(Z),u(O),u(ee)),h&&h.d(e),b&&b.d(),Ae(B,e),_e=!1,Ce()}}}function Ue(t,a,f){let n="all",s="",m="",T=null,d="",p=!1;async function I(){try{f(4,d="");const r=Te(n,s,m);f(3,T=await Ve(`/reports/trial-balance?period=${r}`))}catch(r){f(4,d=r.message||"Failed to load.")}}ke(()=>{f(6,p=!0)});const v=[{header:"Account",render:r=>`<a href="/journal-entries?account_id=${r.account.id}&period=${Te(n,s,m)}">${r.account.path||r.account.name}</a>`},{header:"Type",render:r=>r.account.account_type},{header:"Debit/Credit",render:r=>r.type},{header:"Balance",render:r=>U(r.balance),align:"right"}];function i(){n=Me(this),f(0,n)}function C(){s=this.value,f(1,s)}function K(){m=this.value,f(2,m)}return t.$$.update=()=>{t.$$.dirty&71&&p&&I()},[n,s,m,T,d,v,p,i,C,K]}class Je extends ye{constructor(a){super(),ge(this,a,Ue,qe,De,{})}}export{Je as component};
