import{s as ms,n as cs,o as ws}from"../chunks/scheduler.DXwQMlsl.js";import{S as Es,i as Is,d as a,s as V,k as t,a as ee,b as e,c as n,l as T,g as v,e as o,f as g,y as Z,h as r,j as h,t as D,z as x}from"../chunks/index.BwbdioCG.js";import{f as w,a as fs}from"../chunks/format.j6oJxotq.js";function ps(s){let c,u;return{c(){c=r("p"),u=D(s[1]),this.h()},l(d){c=n(d,"P",{class:!0});var f=o(c);u=g(f,s[1]),f.forEach(a),this.h()},h(){t(c,"class","danger")},m(d,f){ee(d,c,f),e(c,u)},p(d,f){f&2&&V(u,d[1])},d(d){d&&a(c)}}}function gs(s){let c,u="Dashboard",d,f,z="Net worth, cash flow, spending, and investments.",O,b,p,E,_,I,y,R="Net Worth",J,te,Ae=(s[7]?w(s[7]):"--")+"",Ge,mt,se,Se=s[6]!==null?`${s[6]>=0?"+":""}${w(s[6])}`:"--",Ue,wt,le,K,F,We,Et,ae,Le=(s[0].length?pt(s[0][s[0].length-1].month):"")+"",Je,It,$,Q,qt='<div><div class="dash-title">Cash Flow Visualization</div> <div class="dash-sub">Last month income vs expense</div></div>',gt,k,N,ne,Gt="Income",Dt,re,oe,Ke,Ct,ie,Te=w(s[5])+"",Qe,Vt,M,de,Ut="Expense",bt,ve,he,Xe,yt,ue,Fe=w(s[4])+"",Ye,kt,P,ce,Wt="Net",Nt,fe,pe,Ze,Mt,_e,He=w(s[3])+"",xe,Pt,A,q,me,Jt='<div class="dash-title">Net Spending</div> <div class="dash-sub">Spending as % of income</div>',At,we,Be=s[5]?`${(100-s[2]).toFixed(1)}%`:"--",et,St,G,H,S,C,tt,Lt,U,Ee,je=s[5]?`${s[2].toFixed(1)}%`:"--",st,Tt,X,Kt="Saved",Ft,B,Ht,ze=w(s[5])+"",lt,Bt,Oe=w(s[4])+"",at,jt,L,W,Ie,Qt='<div class="dash-title">Investment Performance</div> <div class="dash-sub">Net worth trend proxy</div>',zt,ge,Re=(s[7]?w(s[7]):"--")+"",nt,Ot,De,Y,j,rt,Rt,Ce,$e=(s[0].length?pt(s[0][s[0].length-1].month):"")+"",ot,m=s[1]&&ps(s);return{c(){c=r("h1"),c.textContent=u,d=h(),f=r("p"),f.textContent=z,O=h(),m&&m.c(),b=h(),p=r("div"),E=r("section"),_=r("div"),I=r("div"),y=r("div"),y.textContent=R,J=h(),te=r("div"),Ge=D(Ae),mt=h(),se=r("div"),Ue=D(Se),wt=h(),le=r("div"),K=x("svg"),F=x("polyline"),Et=h(),ae=r("div"),Je=D(Le),It=h(),$=r("section"),Q=r("div"),Q.innerHTML=qt,gt=h(),k=r("div"),N=r("div"),ne=r("span"),ne.textContent=Gt,Dt=h(),re=r("div"),oe=r("span"),Ct=h(),ie=r("span"),Qe=D(Te),Vt=h(),M=r("div"),de=r("span"),de.textContent=Ut,bt=h(),ve=r("div"),he=r("span"),yt=h(),ue=r("span"),Ye=D(Fe),kt=h(),P=r("div"),ce=r("span"),ce.textContent=Wt,Nt=h(),fe=r("div"),pe=r("span"),Mt=h(),_e=r("span"),xe=D(He),Pt=h(),A=r("section"),q=r("div"),me=r("div"),me.innerHTML=Jt,At=h(),we=r("div"),et=D(Be),St=h(),G=r("div"),H=x("svg"),S=x("circle"),C=x("circle"),Lt=h(),U=r("div"),Ee=r("div"),st=D(je),Tt=h(),X=r("div"),X.textContent=Kt,Ft=h(),B=r("div"),Ht=D("Income: "),lt=D(ze),Bt=D(" � Expense: "),at=D(Oe),jt=h(),L=r("section"),W=r("div"),Ie=r("div"),Ie.innerHTML=Qt,zt=h(),ge=r("div"),nt=D(Re),Ot=h(),De=r("div"),Y=x("svg"),j=x("polyline"),Rt=h(),Ce=r("div"),ot=D($e),this.h()},l(l){c=n(l,"H1",{class:!0,"data-svelte-h":!0}),T(c)!=="svelte-1pxx86r"&&(c.textContent=u),d=v(l),f=n(l,"P",{class:!0,"data-svelte-h":!0}),T(f)!=="svelte-1wdnvr2"&&(f.textContent=z),O=v(l),m&&m.l(l),b=v(l),p=n(l,"DIV",{class:!0});var i=o(p);E=n(i,"SECTION",{class:!0});var Ve=o(E);_=n(Ve,"DIV",{class:!0});var it=o(_);I=n(it,"DIV",{});var dt=o(I);y=n(dt,"DIV",{class:!0,"data-svelte-h":!0}),T(y)!=="svelte-zm0o3r"&&(y.textContent=R),J=v(dt),te=n(dt,"DIV",{class:!0});var Xt=o(te);Ge=g(Xt,Ae),Xt.forEach(a),dt.forEach(a),mt=v(it),se=n(it,"DIV",{class:!0});var Yt=o(se);Ue=g(Yt,Se),Yt.forEach(a),it.forEach(a),wt=v(Ve),le=n(Ve,"DIV",{class:!0});var Zt=o(le);K=Z(Zt,"svg",{viewBox:!0,preserveAspectRatio:!0});var xt=o(K);F=Z(xt,"polyline",{fill:!0,stroke:!0,"stroke-width":!0,points:!0}),o(F).forEach(a),xt.forEach(a),Zt.forEach(a),Et=v(Ve),ae=n(Ve,"DIV",{class:!0});var es=o(ae);Je=g(es,Le),es.forEach(a),Ve.forEach(a),It=v(i),$=n(i,"SECTION",{class:!0});var vt=o($);Q=n(vt,"DIV",{class:!0,"data-svelte-h":!0}),T(Q)!=="svelte-sizwtb"&&(Q.innerHTML=qt),gt=v(vt),k=n(vt,"DIV",{class:!0});var be=o(k);N=n(be,"DIV",{class:!0});var ye=o(N);ne=n(ye,"SPAN",{"data-svelte-h":!0}),T(ne)!=="svelte-l2bpkp"&&(ne.textContent=Gt),Dt=v(ye),re=n(ye,"DIV",{class:!0});var ts=o(re);oe=n(ts,"SPAN",{style:!0}),o(oe).forEach(a),ts.forEach(a),Ct=v(ye),ie=n(ye,"SPAN",{class:!0});var ss=o(ie);Qe=g(ss,Te),ss.forEach(a),ye.forEach(a),Vt=v(be),M=n(be,"DIV",{class:!0});var ke=o(M);de=n(ke,"SPAN",{"data-svelte-h":!0}),T(de)!=="svelte-1yjp7we"&&(de.textContent=Ut),bt=v(ke),ve=n(ke,"DIV",{class:!0});var ls=o(ve);he=n(ls,"SPAN",{style:!0}),o(he).forEach(a),ls.forEach(a),yt=v(ke),ue=n(ke,"SPAN",{class:!0});var as=o(ue);Ye=g(as,Fe),as.forEach(a),ke.forEach(a),kt=v(be),P=n(be,"DIV",{class:!0});var Ne=o(P);ce=n(Ne,"SPAN",{"data-svelte-h":!0}),T(ce)!=="svelte-15d3swj"&&(ce.textContent=Wt),Nt=v(Ne),fe=n(Ne,"DIV",{class:!0});var ns=o(fe);pe=n(ns,"SPAN",{style:!0}),o(pe).forEach(a),ns.forEach(a),Mt=v(Ne),_e=n(Ne,"SPAN",{class:!0});var rs=o(_e);xe=g(rs,He),rs.forEach(a),Ne.forEach(a),be.forEach(a),vt.forEach(a),Pt=v(i),A=n(i,"SECTION",{class:!0});var Me=o(A);q=n(Me,"DIV",{class:!0});var ht=o(q);me=n(ht,"DIV",{"data-svelte-h":!0}),T(me)!=="svelte-1u7endm"&&(me.innerHTML=Jt),At=v(ht),we=n(ht,"DIV",{class:!0});var os=o(we);et=g(os,Be),os.forEach(a),ht.forEach(a),St=v(Me),G=n(Me,"DIV",{class:!0});var ut=o(G);H=Z(ut,"svg",{width:!0,height:!0,viewBox:!0});var $t=o(H);S=Z($t,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),o(S).forEach(a),C=Z($t,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,"stroke-dasharray":!0,transform:!0}),o(C).forEach(a),$t.forEach(a),Lt=v(ut),U=n(ut,"DIV",{class:!0});var ct=o(U);Ee=n(ct,"DIV",{class:!0});var is=o(Ee);st=g(is,je),is.forEach(a),Tt=v(ct),X=n(ct,"DIV",{class:!0,"data-svelte-h":!0}),T(X)!=="svelte-1oo4anl"&&(X.textContent=Kt),ct.forEach(a),ut.forEach(a),Ft=v(Me),B=n(Me,"DIV",{class:!0});var qe=o(B);Ht=g(qe,"Income: "),lt=g(qe,ze),Bt=g(qe," � Expense: "),at=g(qe,Oe),qe.forEach(a),Me.forEach(a),jt=v(i),L=n(i,"SECTION",{class:!0});var Pe=o(L);W=n(Pe,"DIV",{class:!0});var ft=o(W);Ie=n(ft,"DIV",{"data-svelte-h":!0}),T(Ie)!=="svelte-1dmhwvb"&&(Ie.innerHTML=Qt),zt=v(ft),ge=n(ft,"DIV",{class:!0});var ds=o(ge);nt=g(ds,Re),ds.forEach(a),ft.forEach(a),Ot=v(Pe),De=n(Pe,"DIV",{class:!0});var vs=o(De);Y=Z(vs,"svg",{viewBox:!0,preserveAspectRatio:!0});var hs=o(Y);j=Z(hs,"polyline",{fill:!0,stroke:!0,"stroke-width":!0,points:!0}),o(j).forEach(a),hs.forEach(a),vs.forEach(a),Rt=v(Pe),Ce=n(Pe,"DIV",{class:!0});var us=o(Ce);ot=g(us,$e),us.forEach(a),Pe.forEach(a),i.forEach(a),this.h()},h(){t(c,"class","page-title"),t(f,"class","page-subtitle"),t(y,"class","dash-title"),t(te,"class","dash-value"),t(se,"class","dash-meta"),t(_,"class","dash-header"),t(F,"fill","none"),t(F,"stroke","#1d4ed8"),t(F,"stroke-width","2"),t(F,"points",We=_t(s[0].slice(-18),280,80,"networth")),t(K,"viewBox","0 0 280 90"),t(K,"preserveAspectRatio","none"),t(le,"class","dash-mini"),t(ae,"class","dash-sub"),t(E,"class","dash-card"),t(Q,"class","dash-header"),t(oe,"style",Ke=`width:${s[5]&&s[5]>0?100:0}%`),t(re,"class","flow-bar"),t(ie,"class","num"),t(N,"class","flow-row"),t(he,"style",Xe=`width:${s[5]?Math.min(100,s[4]/s[5]*100):0}%`),t(ve,"class","flow-bar flow-expense"),t(ue,"class","num"),t(M,"class","flow-row"),t(pe,"style",Ze=`width:${s[5]?Math.min(100,Math.abs(s[3])/s[5]*100):0}%`),t(fe,"class","flow-bar flow-net"),t(_e,"class","num"),t(P,"class","flow-row"),t(k,"class","flow-bars"),t($,"class","dash-card"),t(we,"class","dash-meta"),t(q,"class","dash-header"),t(S,"cx","60"),t(S,"cy","60"),t(S,"r","44"),t(S,"stroke","#e5e7eb"),t(S,"stroke-width","12"),t(S,"fill","none"),t(C,"cx","60"),t(C,"cy","60"),t(C,"r","44"),t(C,"stroke","#16a34a"),t(C,"stroke-width","12"),t(C,"fill","none"),t(C,"stroke-dasharray",tt=_s(s[2])),t(C,"transform","rotate(-90 60 60)"),t(H,"width","120"),t(H,"height","120"),t(H,"viewBox","0 0 120 120"),t(Ee,"class","donut-value"),t(X,"class","donut-sub"),t(U,"class","donut-label"),t(G,"class","donut-wrap"),t(B,"class","dash-sub"),t(A,"class","dash-card"),t(ge,"class","dash-meta"),t(W,"class","dash-header"),t(j,"fill","none"),t(j,"stroke","#0f172a"),t(j,"stroke-width","2"),t(j,"points",rt=_t(s[0].slice(-18),280,80,"networth")),t(Y,"viewBox","0 0 280 90"),t(Y,"preserveAspectRatio","none"),t(De,"class","dash-mini"),t(Ce,"class","dash-sub"),t(L,"class","dash-card"),t(p,"class","dash-grid")},m(l,i){ee(l,c,i),ee(l,d,i),ee(l,f,i),ee(l,O,i),m&&m.m(l,i),ee(l,b,i),ee(l,p,i),e(p,E),e(E,_),e(_,I),e(I,y),e(I,J),e(I,te),e(te,Ge),e(_,mt),e(_,se),e(se,Ue),e(E,wt),e(E,le),e(le,K),e(K,F),e(E,Et),e(E,ae),e(ae,Je),e(p,It),e(p,$),e($,Q),e($,gt),e($,k),e(k,N),e(N,ne),e(N,Dt),e(N,re),e(re,oe),e(N,Ct),e(N,ie),e(ie,Qe),e(k,Vt),e(k,M),e(M,de),e(M,bt),e(M,ve),e(ve,he),e(M,yt),e(M,ue),e(ue,Ye),e(k,kt),e(k,P),e(P,ce),e(P,Nt),e(P,fe),e(fe,pe),e(P,Mt),e(P,_e),e(_e,xe),e(p,Pt),e(p,A),e(A,q),e(q,me),e(q,At),e(q,we),e(we,et),e(A,St),e(A,G),e(G,H),e(H,S),e(H,C),e(G,Lt),e(G,U),e(U,Ee),e(Ee,st),e(U,Tt),e(U,X),e(A,Ft),e(A,B),e(B,Ht),e(B,lt),e(B,Bt),e(B,at),e(p,jt),e(p,L),e(L,W),e(W,Ie),e(W,zt),e(W,ge),e(ge,nt),e(L,Ot),e(L,De),e(De,Y),e(Y,j),e(L,Rt),e(L,Ce),e(Ce,ot)},p(l,[i]){l[1]?m?m.p(l,i):(m=ps(l),m.c(),m.m(b.parentNode,b)):m&&(m.d(1),m=null),i&128&&Ae!==(Ae=(l[7]?w(l[7]):"--")+"")&&V(Ge,Ae),i&64&&Se!==(Se=l[6]!==null?`${l[6]>=0?"+":""}${w(l[6])}`:"--")&&V(Ue,Se),i&1&&We!==(We=_t(l[0].slice(-18),280,80,"networth"))&&t(F,"points",We),i&1&&Le!==(Le=(l[0].length?pt(l[0][l[0].length-1].month):"")+"")&&V(Je,Le),i&32&&Ke!==(Ke=`width:${l[5]&&l[5]>0?100:0}%`)&&t(oe,"style",Ke),i&32&&Te!==(Te=w(l[5])+"")&&V(Qe,Te),i&48&&Xe!==(Xe=`width:${l[5]?Math.min(100,l[4]/l[5]*100):0}%`)&&t(he,"style",Xe),i&16&&Fe!==(Fe=w(l[4])+"")&&V(Ye,Fe),i&40&&Ze!==(Ze=`width:${l[5]?Math.min(100,Math.abs(l[3])/l[5]*100):0}%`)&&t(pe,"style",Ze),i&8&&He!==(He=w(l[3])+"")&&V(xe,He),i&36&&Be!==(Be=l[5]?`${(100-l[2]).toFixed(1)}%`:"--")&&V(et,Be),i&4&&tt!==(tt=_s(l[2]))&&t(C,"stroke-dasharray",tt),i&36&&je!==(je=l[5]?`${l[2].toFixed(1)}%`:"--")&&V(st,je),i&32&&ze!==(ze=w(l[5])+"")&&V(lt,ze),i&16&&Oe!==(Oe=w(l[4])+"")&&V(at,Oe),i&128&&Re!==(Re=(l[7]?w(l[7]):"--")+"")&&V(nt,Re),i&1&&rt!==(rt=_t(l[0].slice(-18),280,80,"networth"))&&t(j,"points",rt),i&1&&$e!==($e=(l[0].length?pt(l[0][l[0].length-1].month):"")+"")&&V(ot,$e)},i:cs,o:cs,d(l){l&&(a(c),a(d),a(f),a(O),a(b),a(p)),m&&m.d(l)}}}function pt(s){const[c,u]=s.split("-");return new Date(Number(c),Number(u)-1,1).toLocaleString("en-US",{month:"short",year:"numeric"})}function _t(s,c,u,d){if(!s.length)return"";const f=s.map(p=>Number(p[d])||0),z=Math.min(...f),b=Math.max(...f)-z||1;return s.map((p,E)=>{const _=E/Math.max(s.length-1,1)*c,I=u-((Number(p[d])||0)-z)/b*u;return`${_},${I}`}).join(" ")}function _s(s){const u=2*Math.PI*44,d=s/100*u;return`${d} ${u-d}`}function Ds(s,c,u){let d,f,z,O,b,p,E,_=[],I=[],y="";return ws(async()=>{try{const R=await fs("/reports/networth-monthly"),J=await fs("/reports/net-savings-series");u(0,_=(R==null?void 0:R.months)||[]),u(8,I=(J==null?void 0:J.months)||[])}catch(R){u(1,y=R.message||"Failed to load.")}}),s.$$.update=()=>{s.$$.dirty&256&&u(9,d=I.length?I[I.length-1]:null),s.$$.dirty&1&&u(7,f=_.length?_[_.length-1].networth:null),s.$$.dirty&1&&u(6,z=_.length?_[_.length-1].delta:null),s.$$.dirty&512&&u(5,O=(d==null?void 0:d.income)||0),s.$$.dirty&512&&u(4,b=(d==null?void 0:d.expense)||0),s.$$.dirty&512&&u(3,p=(d==null?void 0:d.net_savings)||0),s.$$.dirty&512&&u(2,E=(d==null?void 0:d.net_savings_pct)||0)},[_,y,E,p,b,O,z,f,I,d]}class ys extends Es{constructor(c){super(),Is(this,c,Ds,gs,ms,{})}}export{ys as component};
