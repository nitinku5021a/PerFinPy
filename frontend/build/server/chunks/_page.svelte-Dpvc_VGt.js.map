{"version":3,"file":"_page.svelte-Dpvc_VGt.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/dashboard/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, g as escape, d as add_attribute } from \"../../../chunks/ssr.js\";\nimport { f as formatInr } from \"../../../chunks/format.js\";\nfunction labelForMonth(key) {\n  const [y, m] = key.split(\"-\");\n  const d = new Date(Number(y), Number(m) - 1, 1);\n  return d.toLocaleString(\"en-US\", { month: \"short\", year: \"numeric\" });\n}\nfunction linePoints(series, width, height, key) {\n  if (!series.length) return \"\";\n  const values = series.map((d) => Number(d[key]) || 0);\n  const min = Math.min(...values);\n  const max = Math.max(...values);\n  const range = max - min || 1;\n  return series.map((d, i) => {\n    const x = i / Math.max(series.length - 1, 1) * width;\n    const y = height - ((Number(d[key]) || 0) - min) / range * height;\n    return `${x},${y}`;\n  }).join(\" \");\n}\nfunction donutDash(pct) {\n  const radius = 44;\n  const circumference = 2 * Math.PI * radius;\n  const dash = pct / 100 * circumference;\n  return `${dash} ${circumference - dash}`;\n}\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let lastSavings;\n  let networthLatest;\n  let networthDelta;\n  let incomeLatest;\n  let expenseLatest;\n  let netSavingsLatest;\n  let netSavingsPct;\n  let networthMonthly = [];\n  let savings = [];\n  lastSavings = savings.length ? savings[savings.length - 1] : null;\n  networthLatest = networthMonthly.length ? networthMonthly[networthMonthly.length - 1].networth : null;\n  networthDelta = networthMonthly.length ? networthMonthly[networthMonthly.length - 1].delta : null;\n  incomeLatest = lastSavings?.income || 0;\n  expenseLatest = lastSavings?.expense || 0;\n  netSavingsLatest = lastSavings?.net_savings || 0;\n  netSavingsPct = lastSavings?.net_savings_pct || 0;\n  return `<h1 class=\"page-title\" data-svelte-h=\"svelte-1pxx86r\">Dashboard</h1> <p class=\"page-subtitle\" data-svelte-h=\"svelte-1wdnvr2\">Net worth, cash flow, spending, and investments.</p> ${``} <div class=\"dash-grid\"><section class=\"dash-card\"><div class=\"dash-header\"><div><div class=\"dash-title\" data-svelte-h=\"svelte-zm0o3r\">Net Worth</div> <div class=\"dash-value\">${escape(networthLatest ? formatInr(networthLatest) : \"--\")}</div></div> <div class=\"dash-meta\">${escape(networthDelta !== null ? `${networthDelta >= 0 ? \"+\" : \"\"}${formatInr(networthDelta)}` : \"--\")}</div></div> <div class=\"dash-mini\"><svg viewBox=\"0 0 280 90\" preserveAspectRatio=\"none\"><polyline fill=\"none\" stroke=\"#1d4ed8\" stroke-width=\"2\"${add_attribute(\"points\", linePoints(networthMonthly.slice(-18), 280, 80, \"networth\"), 0)}></polyline></svg></div> <div class=\"dash-sub\">${escape(networthMonthly.length ? labelForMonth(networthMonthly[networthMonthly.length - 1].month) : \"\")}</div></section> <section class=\"dash-card\"><div class=\"dash-header\" data-svelte-h=\"svelte-sizwtb\"><div><div class=\"dash-title\">Cash Flow Visualization</div> <div class=\"dash-sub\">Last month income vs expense</div></div></div> <div class=\"flow-bars\"><div class=\"flow-row\"><span data-svelte-h=\"svelte-l2bpkp\">Income</span> <div class=\"flow-bar\"><span${add_attribute(\"style\", `width:${incomeLatest && incomeLatest > 0 ? 100 : 0}%`, 0)}></span></div> <span class=\"num\">${escape(formatInr(incomeLatest))}</span></div> <div class=\"flow-row\"><span data-svelte-h=\"svelte-1yjp7we\">Expense</span> <div class=\"flow-bar flow-expense\"><span${add_attribute(\n    \"style\",\n    `width:${incomeLatest ? Math.min(100, expenseLatest / incomeLatest * 100) : 0}%`,\n    0\n  )}></span></div> <span class=\"num\">${escape(formatInr(expenseLatest))}</span></div> <div class=\"flow-row\"><span data-svelte-h=\"svelte-15d3swj\">Net</span> <div class=\"flow-bar flow-net\"><span${add_attribute(\n    \"style\",\n    `width:${incomeLatest ? Math.min(100, Math.abs(netSavingsLatest) / incomeLatest * 100) : 0}%`,\n    0\n  )}></span></div> <span class=\"num\">${escape(formatInr(netSavingsLatest))}</span></div></div></section> <section class=\"dash-card\"><div class=\"dash-header\"><div data-svelte-h=\"svelte-1u7endm\"><div class=\"dash-title\">Net Spending</div> <div class=\"dash-sub\">Spending as % of income</div></div> <div class=\"dash-meta\">${escape(incomeLatest ? `${(100 - netSavingsPct).toFixed(1)}%` : \"--\")}</div></div> <div class=\"donut-wrap\"><svg width=\"120\" height=\"120\" viewBox=\"0 0 120 120\"><circle cx=\"60\" cy=\"60\" r=\"44\" stroke=\"#e5e7eb\" stroke-width=\"12\" fill=\"none\"></circle><circle cx=\"60\" cy=\"60\" r=\"44\" stroke=\"#16a34a\" stroke-width=\"12\" fill=\"none\"${add_attribute(\"stroke-dasharray\", donutDash(netSavingsPct), 0)} transform=\"rotate(-90 60 60)\"></circle></svg> <div class=\"donut-label\"><div class=\"donut-value\">${escape(incomeLatest ? `${netSavingsPct.toFixed(1)}%` : \"--\")}</div> <div class=\"donut-sub\" data-svelte-h=\"svelte-1oo4anl\">Saved</div></div></div> <div class=\"dash-sub\">Income: ${escape(formatInr(incomeLatest))} ï¿½ Expense: ${escape(formatInr(expenseLatest))}</div></section> <section class=\"dash-card\"><div class=\"dash-header\"><div data-svelte-h=\"svelte-1dmhwvb\"><div class=\"dash-title\">Investment Performance</div> <div class=\"dash-sub\">Net worth trend proxy</div></div> <div class=\"dash-meta\">${escape(networthLatest ? formatInr(networthLatest) : \"--\")}</div></div> <div class=\"dash-mini\"><svg viewBox=\"0 0 280 90\" preserveAspectRatio=\"none\"><polyline fill=\"none\" stroke=\"#0f172a\" stroke-width=\"2\"${add_attribute(\"points\", linePoints(networthMonthly.slice(-18), 280, 80, \"networth\"), 0)}></polyline></svg></div> <div class=\"dash-sub\">${escape(networthMonthly.length ? labelForMonth(networthMonthly[networthMonthly.length - 1].month) : \"\")}</div></section></div>`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}